<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Password Input Toggle Demo - Resonance</title>
    <link rel="stylesheet" href="../../assets/style/global.css" />
    <link rel="stylesheet" href="password-input-toggle.css" />
    <link
      rel="icon"
      href="../../assets/images/favicon.ico"
      type="image/x-icon"
    />
  </head>
  <body>
    <header>
      <a href="../../index.html" class="back-link">
        <img src="../../assets/images/logo.svg" alt="Resonance Logo" />
      </a>
    </header>
    <main>
      <div class="section">
        <h1>Password Input Toggle Demo</h1>
        <div id="mount"></div>
      </div>

      <div class="section">
        <h2>HTML Code</h2>
        <button class="code-preview__toggle" aria-expanded="false" aria-controls="code-preview">Show Code</button>
        <div class="code-preview" id="code-preview" hidden>
          <pre><code id="code-output"></code></pre>
          <button class="code-preview__copy">Copy</button>
        </div>
      </div>

      <div class="section">
        <h2>Resources</h2>
        <ul class="btn-group">
          <li>
            <a class="btn btn-primary" href="../../index.html">Back to Home</a>
          </li>
          <li>
            <a
              class="btn btn-secondary"
              href="https://github.com/HectorOsborneRodriguez/resonance_code_demo"
              >GitHub Code</a
            >
          </li>
        </ul>
      </div>
    </main>

    <footer>
      <p>&copy; Accenture - Resonance</p>
    </footer>
    <script>
      fetch("./password-input-toggle.html")
        .then((r) => r.text())
        .then((html) => {
          document.getElementById("mount").innerHTML = html;

          // Populate code preview (strip leading comment block)
          var raw = html.replace(/<!--[\s\S]*?-->\n*/, "").trim();
          document.getElementById("code-output").textContent = raw;

          // Toggle show/hide
          var toggle = document.querySelector(".code-preview__toggle");
          var preview = document.getElementById("code-preview");
          toggle.addEventListener("click", function () {
            var expanded = preview.hidden;
            preview.hidden = !expanded;
            toggle.textContent = expanded ? "Hide Code" : "Show Code";
            toggle.setAttribute("aria-expanded", expanded);
          });

          // Copy to clipboard
          var copyBtn = document.querySelector(".code-preview__copy");
          copyBtn.addEventListener("click", function () {
            navigator.clipboard.writeText(raw).then(function () {
              copyBtn.textContent = "Copied!";
              setTimeout(function () { copyBtn.textContent = "Copy"; }, 2000);
            });
          });

          var s = document.createElement("script");
          s.src = "./password-input-toggle.js";
          document.body.appendChild(s);
        });
    </script>
  </body>
</html>
